<% include partials/header.ejs %>
<% include partials/navbar.ejs %>

<div class="bg-[#0f0f0f] bg-cover bg-center bg-no-repeat">
  <h1 class="text-5xl font-bold mb-6 text-[#fff] text-center coffeeitem pt-3">Settings</h1>

    <!-- Flash Messages -->

<% if (success_msg && success_msg.length > 0) { %>
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative mb-4 flash-message" role="alert">
      <strong class="font-bold">Success!</strong>
      <span class="block sm:inline"><%= success_msg %></span>
    </div>
  <% } %>
  
  <% if (error_msg && error_msg.length > 0) { %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded relative mb-4 flash-message" role="alert">
      <strong class="font-bold">Error!</strong>
      <span class="block sm:inline"><%= error_msg %></span>
    </div>
  <% } %>
  <div class="bg-[rgb(255,255,255,0.1)] mx-16 p-6 rounded-lg shadow-lg items-center flex justify-center flex-col text-white space-y-6">
    
    <!-- Profile Settings Form -->
    <div class="w-full">
      <h2 class="text-2xl font-bold mb-4">Profile Settings</h2>
      <form action="/users/updateProfile" method="POST" class="space-y-4">
        <div class="flex flex-col">
          <label for="name" class="text-lg mb-2">Name:</label>
          <input type="text" id="name" name="name" value="<%= user.name %>" class="py-2 px-4 bg-[#333] border border-[#555] rounded-md focus:outline-none focus:ring-2 focus:ring-[#d4af37]">
        </div>
        <div class="flex flex-col">
          <label for="email" class="text-lg mb-2">Email:</label>
          <input type="email" id="email" name="email" value="<%= user.email %>" class="py-2 px-4 bg-[#333] border border-[#555] rounded-md focus:outline-none focus:ring-2 focus:ring-[#d4af37]">
        </div>
        <button type="submit" class="w-full py-1 bg-[#d4af37] text-black font-bold rounded-md hover:bg-[#b6942b] transition-colors">
          Update Profile
        </button>
      </form>
    </div>

    <!-- Account Settings Form -->
    <div class="w-full">
      <h2 class="text-2xl font-bold mb-4">Account Settings</h2>
      <form action="/users/updateAccount" method="POST" class="space-y-4">
        <div class="flex flex-col">
          <label for="password" class="text-lg mb-2">Change Password:</label>
          <input type="password" id="password" name="password" class="py-2 px-4 bg-[#333] border border-[#555] rounded-md focus:outline-none focus:ring-2 focus:ring-[#d4af37]">
        </div>
        <div class="flex flex-col">
          <label for="phone" class="text-lg mb-2">Phone Number:</label>
          <input type="text" id="phone" name="phone" value="<%= user.phone %>" class="py-2 px-4 bg-[#333] border border-[#555] rounded-md focus:outline-none focus:ring-2 focus:ring-[#d4af37]">
        </div>
        <button type="submit" class="w-full py-1 bg-[#d4af37] text-black font-bold rounded-md hover:bg-[#b6942b] transition-colors">
          Update Account
        </button>
      </form>
    </div>

    <!-- Notification Settings -->
    <!-- <div class="w-full">
      <h2 class="text-2xl font-bold mb-4">Notification Settings</h2>
      <form action="/users/updateNotifications" method="POST" class="space-y-4">
        <div class="flex flex-col">
          <label for="emailNotifications" class="text-lg mb-2">Email Notifications:</label>
          <input type="checkbox" id="emailNotifications" name="emailNotifications" <%= user.emailNotifications ? 'checked' : '' %> class="h-6 w-6">
        </div>
        <button type="submit" class="w-full py-1 bg-[#d4af37] text-black font-bold rounded-md hover:bg-[#b6942b] transition-colors">
          Update Notifications
        </button>
      </form>
    </div> -->

    
    <!-- Delete Account -->
    <div class="w-full">
      <h2 class="text-2xl font-bold mb-4">Delete Account</h2>
      <form action="/users/deleteAccount" method="POST">
        <button type="submit" class="w-full py-1 bg-red-600 text-white font-bold rounded-md hover:bg-red-700 transition-colors">
          Delete Account
        </button>
      </form>
    </div>
  </div>
</div>

<% include partials/footer.ejs %>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const flashMessages = document.querySelectorAll('.flash-message');
        flashMessages.forEach(message => {
            setTimeout(() => {
                message.style.display = 'none';
            }, 2000);
        });
    });
</script>
